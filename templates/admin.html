{% extends 'base.html' %}
{% block content %}

<h2>Admin Panel</h2>

<!-- ADD DISH FORM -->
<form method="post">
    <input type="text" name="name" placeholder="Dish Name" required>

    <input type="number" name="price" placeholder="Price (₹)" required>

    <input type="text" name="image" placeholder="Image URL" required>

    <select name="cuisine" required>
        <option value="">Select Cuisine</option>
        <option value="Indian">Indian</option>
        <option value="Chinese">Chinese</option>
        <option value="Italian">Italian</option>
        <option value="Mexican">Mexican</option>
        <option value="Korean">Korean</option>
    </select>

 {% if not current_user.restaurant_id %}
<select name="restaurant_id" required>
  <option value="">Select Restaurant</option>
  {% for r in restaurants %}
    <option value="{{ r.id }}">{{ r.name }}</option>
  {% endfor %}
</select>
{% endif %}

    <!-- ✅ NEW CHECKBOXES -->
    <div class="admin-flags">

  <label class="flag">
    <input type="checkbox" name="is_veg" checked>
    <span class="dot veg"></span>
    Veg
  </label>

  <label class="flag">
    <input type="checkbox" name="is_bestseller">
    ⭐ Bestseller
  </label>

</div>
    <button type="submit">Add Dish</button>
</form>

<hr style="margin:30px 0;">

<!-- ALL ITEMS LIST -->
<h3>All Items</h3>

{% if foods|length == 0 %}
<p>No dishes added yet.</p>
{% endif %}

{% for food in foods %}
<div class="card" style="display:flex; gap:15px; align-items:center;">

    <!-- IMAGE -->
    <img src="{{ food.image }}"
         alt="{{ food.name }}"
         style="width:90px; height:70px; object-fit:cover; border-radius:8px;">

    <!-- DETAILS -->
    <div style="flex:1;">
        <b>{{ food.name }}</b><br>
        ₹{{ food.price }} • {{ food.cuisine }}
    </div>

    <!-- DELETE -->
    <a href="/admin/delete/{{ food.id }}"
       onclick="return confirm('Are you sure you want to delete this dish?')"
       style="color:red; text-decoration:none; font-weight:bold;">
       ❌
    </a>

</div>
{% endfor %}

{% endblock %}
